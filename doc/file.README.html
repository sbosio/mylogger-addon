<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="mylogger_addon_demo">Mylogger Add-on Demo</h1>

<p>This is an example implementation of a Heroku Partner Add-on. More specifically, this add-on lets you persist the log messages generated by the Heroku application where it’s installed. It isn’t meant to be useful at all, due to its obvious limitations, but is a good way to exercise using Heroku’s Add-on Partner API and best practices.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
<li>Log in or sign up for a free Heroku account at <a href="https://heroku.com">heroku.com</a>.</li>

<li>Register as an add-on partner on the <a href="https://addons-next.heroku.com/">Add-on Partner Portal</a>.</li>

<li>Install Heroku’s CLI (command line interface tool), if you haven’t done that already, following the <a href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install">instructions</a> for your platform.</li>

<li><a href="https://devcenter.heroku.com/articles/heroku-cli#getting-started">Log in</a> with the CLI tool and install the Add-ons Admin plug-in following these <a href="https://github.com/heroku/heroku-cli-addons-admin#installation">instructions</a>.</li>
</ul>

<h2 id="implementation_steps">Implementation steps</h2>

<p>Implementation was done is successive iterations, by following Heroku’s Devcenter documentation on <a href="https://devcenter.heroku.com/articles/building-an-add-on">Building an Add-on</a>.</p>

<h3 id="generating_the_json_manifest">Generating the JSON manifest</h3>

<p>I generated the initial manifest as explained <a href="https://devcenter.heroku.com/articles/building-an-add-on#step-1-generate-your-add-on-manifest">here</a> and made all the required changes before <a href="https://github.com/heroku/heroku-cli-addons-admin#heroku-addonsadminmanifestpush">pushing it</a> to the Add-on Partner Portal.</p>

<p>My final <code>addon-manifest.json</code> file contents were roughly as follows (obviously, I won’t put here the sensitive info):</p>

<p>“on { “id”: “mylogger-demo”, “api”: { “regions”: [us], “version”: “3”, “password”: “scrubbed password”, “requires”: [syslog_drain], “sso_salt”: “scrubbed sso_salt”, “production”: { “sso_url”: “https://mylogger-addon.herokuapp.com/sso/login”, “base_url”: “https://mylogger-addon.herokuapp.com/heroku/resources” }, “config_vars”: [MYLOGGER_DEMO_URL], “config_vars_prefix”: “MYLOGGER_DEMO” }, “name”: “My Logger Addon Demo”, “$base”: 11111111111111 }</p>

<p>“</p>

<blockquote>
<p>Note: you can’t use the words <em>add-on</em> or <em>addon</em> as part of the <code>id</code> (aka <em>slug</em>) to identify your add-on. Be smarter than me.</p>
</blockquote>

<h3 id="integrating_with_the_addon_partner_api">Integrating with the Add-on Partner API</h3>

<p>Each add-on must provide correctly implemented endpoints for <em>provisioning</em>, <em>deprovisioning</em> and <em>changing plans</em>. For this demo I haven’t implemented the plan change endpoint as it will never reach GA release stage and there’s only a <a href="https://devcenter.heroku.com/articles/bringing-an-add-on-to-market#alpha-stage">free <em>test</em> plan</a> allowed, but it’s a <strong>MUST</strong> for a real add-on.</p>

<h4 id="provisioning_endpoint">Provisioning endpoint</h4>

<p>Heroku uses the name <em>resource</em> to identify a provisioned add-on for an application, so it was natural to use the same name here to model that domain object. Each instance of the <a href="https://github.com/sbosio/mylogger-addon/blob/master/app/models/resource.rb">Resource</a> model class represents then a provisioning of this Add-on on some Heroku application.</p>

<p>The life cycle of each one of these resources is controlled by a finite state machine defined in the model class using the <a href="https://github.com/state-machines/state_machines">state_machines</a> gem.</p>

<p>Provisioning endpoint must respond to <code>POST</code> requests sent to</p>
</div></div>

      <div id="footer">
  Generated on Thu Jun  4 21:07:00 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.6.6).
</div>

    </div>
  </body>
</html>